name: Java CI

on: [workflow_dispatch]

jobs:
  build-and-run:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v2

      #- name: Setup OpenJDK 21
       # uses: actions/setup-java@v2
        #with:
         # java-version: '21-ea'
          #distribution: 'temurin'

      - name: Run Server
        run:
            wget https://aka.ms/download-jdk/microsoft-jdk-21.0.4-linux-x64.tar.gz

            tar -xvzf microsoft-jdk-21.0.4-linux-x64.tar.gz 

            wget https://meta.fabricmc.net/v2/versions/loader/1.21/0.15.11/1.0.1/server/jar

            echo "eula=true" >> eula.txt

            wget https://cdn.modrinth.com/data/qANg5Jrr/versions/JwZn7YZ0/e4mc_minecraft-5.1.0.jar

            mkdir mods

            mv e4mc_minecraft-5.1.0.jar mods/
                       
            ./jdk-21.0.4+7/bin/java -jar fabric-server-mc.1.21-loader.0.15.11-launcher.1.0.1.jar